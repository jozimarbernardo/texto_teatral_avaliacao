<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade de Teatro - 4º Bimestre</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React e ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Remove o outline azul padrão ao clicar nos inputs para usar o nosso estilo */
        textarea:focus, input:focus { outline: none; }
    </style>
</head>
<body class="bg-slate-100">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- Componente de Texto Expansível ---
        const AutoTextArea = ({ value, onChange, placeholder }) => {
            const textareaRef = useRef(null);

            useEffect(() => {
                if (textareaRef.current) {
                    textareaRef.current.style.height = 'auto'; 
                    textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';
                }
            }, [value]);

            return (
                <textarea
                    ref={textareaRef}
                    value={value}
                    onChange={onChange}
                    placeholder={placeholder}
                    rows={1}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none overflow-hidden bg-white min-h-[50px]"
                />
            );
        };

        // --- Ícones ---
        const BookOpen = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const Send = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>;
        const CheckCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>;
        const AlertCircle = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>;
        const Info = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>;
        const SaveIcon = ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>;

        function TheaterActivity() {
            // Estado Inicial Padrão
            const initialAnswers = {
                studentName: '', studentEmail: '',
                q1: '', q2a: '', q2b: '', q2c: '', q2d: '',
                q3a: '', q3b: '', q4: '', q5a: '', q5b: '', q5c: '', q5d: '',
                q6a: '', q6b: '', q7a: '', q7b: '', q7c: '',
                q8: '', q9a: '', q9b: '', q10a: '', q10b: ''
            };

            // Inicializa o estado buscando no LocalStorage se houver
            const [answers, setAnswers] = useState(() => {
                const saved = localStorage.getItem('teatro_2a_serie_backup');
                if (saved) {
                    try {
                        return JSON.parse(saved);
                    } catch (e) {
                        return initialAnswers;
                    }
                }
                return initialAnswers;
            });

            const [status, setStatus] = useState({ type: '', message: '' });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [errors, setErrors] = useState({}); 

            // Efeito para salvar automaticamente sempre que 'answers' mudar
            useEffect(() => {
                localStorage.setItem('teatro_2a_serie_backup', JSON.stringify(answers));
            }, [answers]);

            const handleChange = (field, value) => {
                setAnswers(prev => ({ ...prev, [field]: value }));
                if (errors[field]) {
                    setErrors(prev => {
                        const newErrors = { ...prev };
                        delete newErrors[field];
                        return newErrors;
                    });
                }
            };

            const validateForm = () => {
                const newErrors = {};
                Object.keys(answers).forEach(key => {
                    if (!answers[key] || answers[key].toString().trim() === '') {
                        newErrors[key] = true;
                    }
                });
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            const handleSubmit = async () => {
                setStatus({ type: '', message: '' });

                if (!validateForm()) {
                    setStatus({ type: 'error', message: 'Existem questões em branco. Por favor, responda todas antes de enviar!' });
                    const firstError = document.querySelector('.border-red-500');
                    if (firstError) firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }

                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(answers.studentEmail)) {
                    setStatus({ type: 'error', message: 'Por favor, informe um e-mail válido!' });
                    setErrors(prev => ({...prev, studentEmail: true}));
                    return;
                }

                setIsSubmitting(true);
                setStatus({ type: 'info', message: 'Enviando respostas...' });

                try {
                    // --- LINK CONFIGURADO ---
                    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbytstQNVWWo1IFtruDIQjVSB6Vr8Q1hsofxRLoFOomPyTFH7AuIU-8y_h5omQ0Fmuudbw/exec'; 

                    await fetch(SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors', 
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            ...answers,
                            timestamp: new Date().toLocaleString('pt-BR')
                        })
                    });

                    setStatus({ 
                        type: 'success', 
                        message: 'Atividade entregue com sucesso! O professor já recebeu suas respostas. ✓' 
                    });
                    
                    // Limpa o backup do localStorage após o sucesso
                    localStorage.removeItem('teatro_2a_serie_backup');
                    
                    // Opcional: Limpar o formulário ou mantê-lo preenchido. 
                    // Aqui vou manter preenchido para o aluno ver o que enviou, mas se recarregar a página virá vazio.
                    
                    setTimeout(() => {
                        const statusDiv = document.getElementById('status-area');
                        if (statusDiv) statusDiv.scrollIntoView({ behavior: 'smooth' });
                    }, 100);

                } catch (error) {
                    console.error(error);
                    setStatus({ type: 'error', message: 'Erro ao enviar. Tente novamente mais tarde.' });
                } finally {
                    setIsSubmitting(false);
                }
            };

            const getFieldClass = (fieldName) => {
                return errors[fieldName] ? "border-2 border-red-500 bg-red-50 rounded-lg" : "";
            };

            return (
                <div className="min-h-screen pb-10">
                    <div className="max-w-4xl mx-auto">
                        
                        {/* Cabeçalho */}
                        <div className="bg-gradient-to-r from-blue-900 to-blue-700 text-white md:rounded-t-lg shadow-lg p-6">
                            <div className="text-center mb-6">
                                <h2 className="text-xl font-bold tracking-wider mb-2 uppercase">CEPI Matilde Margon Vaz</h2>
                                <div className="flex flex-col md:flex-row justify-center items-center gap-2 text-blue-100 text-sm">
                                    <span className="bg-blue-800/50 px-3 py-1 rounded-full">Professor: Jozimar</span>
                                    <span className="hidden md:inline">•</span>
                                    <span className="bg-blue-800/50 px-3 py-1 rounded-full">Disciplina: Língua Portuguesa</span>
                                    <span className="hidden md:inline">•</span>
                                    <span className="bg-blue-800/50 px-3 py-1 rounded-full">Série/Turma: 2ª A</span>
                                </div>
                            </div>
                            <div className="border-t border-white/20 my-6"></div>
                            <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                                <div className="flex items-center gap-4">
                                    <div className="bg-white/10 p-3 rounded-full">
                                        <BookOpen className="w-8 h-8 text-yellow-300" />
                                    </div>
                                    <div>
                                        <h1 className="text-2xl md:text-3xl font-bold text-white">AVALIAÇÃO BIMESTRAL</h1>
                                        <p className="text-blue-200 font-medium">4º Bimestre - Interpretação de Texto Teatral</p>
                                    </div>
                                </div>
                                <div className="bg-white/90 text-blue-900 px-6 py-2 rounded-full font-bold text-lg shadow-lg">Valor: 5,0</div>
                            </div>
                        </div>

                        {/* Corpo Principal */}
                        <div className="bg-white md:rounded-b-lg shadow-xl p-6 md:p-8 mb-8">
                            
                            {/* Texto Base */}
                            <div className="bg-purple-50 rounded-xl p-6 md:p-8 mb-8 border border-purple-100">
                                <div className="text-center mb-6">
                                    <span className="bg-purple-200 text-purple-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">Texto Base</span>
                                    <h2 className="text-2xl font-bold text-purple-900 mt-3 mb-1">"O que os meninos pensam delas"</h2>
                                    <p className="text-purple-700 italic">Por Adélia Nicolete</p>
                                </div>
                                {/* Ajuste de Design: text-left no mobile, justify no PC */}
                                <div className="prose max-w-none text-gray-700 leading-relaxed space-y-4 font-serif text-left md:text-justify">
                                    
                                    {/* Destaque Rubrica */}
                                    <div className="relative border-l-4 border-purple-400 bg-white/70 pl-4 py-2 my-4 rounded-r">
                                        <span className="absolute -top-3 left-0 bg-purple-200 text-purple-800 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider border border-purple-300">
                                            Rubrica Inicial
                                        </span>
                                        <p className="italic text-gray-600 mb-2 mt-2">
                                            A ação se passa na sala de estar de um apartamento de classe média, num dos últimos andares. 
                                            Um pôster de algum astro de música pop decora uma das paredes. As meninas fazem reverência a ele de vez em quando.
                                        </p>
                                        <p className="italic text-gray-600">
                                            Sábado à tarde. Televisão, revistas espalhadas por todo o ambiente. Refrigerantes, salgadinhos, etc. 
                                            A cena começa com Carol e Ana Paula acompanhando um clipe internacional de rock na TV, lendo a letra da música em uma revista. 
                                            As duas cantam, dançam. De repente, Ana Paula emburra e desliga a TV.
                                        </p>
                                    </div>

                                    <div className="pl-4 md:pl-8 space-y-3 my-6 border-l-4 border-purple-200">
                                        <p><strong className="text-purple-900">CAROL</strong> - Eh, animal! Dá aqui esse controle remoto! O que foi agora, Ana Paula?</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Não se faça de desentendida!</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Eu tava desafinando tanto assim?...</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Não! É que eu tô aqui toda amiguinha sua e me lembrei que eu devia estar uma fera com você!</p>
                                        <p><strong className="text-purple-900">CAROL</strong> <span className="italic text-gray-500">(liga novamente a TV, mais baixo)</span> - Fera comigo?! Tá louca? O que que eu fiz, Ana Paula?</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Eu vou embora! <span className="italic text-gray-500">(começa a juntar algumas revistas)</span></p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Como vai embora? Sua mãe viajou! Vai ter que me aguentar o fim de semana in-tei-ri-nho! E eu vou conversar até de madrugada, você não vai conseguir dormir!!! <span className="italic text-gray-500">(gargalhada macabra)</span> Porque eu tenho insônia!!!!</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - E a noite tá só começando...</p>
                                        <p><strong className="text-purple-900">CAROL</strong> <span className="italic text-gray-500">(Terrorista)</span> - Eu tenho insônia!</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Para! Que terrorismo! <span className="italic text-gray-500">(procura algo nas revistas)</span> Insônia, insônia... Eu tenho a solução. Cadê? T'aqui: "um copo de leite morno antes de dormir pode ajudar". Pronto. Você mama e dorme.</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Não adianta copo de leite morno. É mal de família. Só dormimos depois das três.</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Se ao menos usasse esse tempo pra estudar, garanto que tirava notas melhores.</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Começou a humilhação. A vingança da CDF! Se eu não fosse sua amiga, Ana Paula, juro que ia ser sua pior inimiga!</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Amiga! Que amiga?... Contar pro Toninho que eu tava a fim dele!?</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Ah! É por isso que você tá tão fula da vida?</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Contou ou não contou?</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Contei, e daí? Você não tava mesmo a fim do cara?</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Tava! Mas era segredo, entre mim e você! Cadê? <span className="italic text-gray-500">(procura nas revistas)</span> Ah! Essas revistas são a minha salvação! Achei! <span className="italic text-gray-500">(beija a revista)</span> Tem aqui uma coisa básica sobre paquera, escuta só: "Quando o menino sabe que a menina tá a fim, a tendência é a relação esfriar". E foi o que aconteceu! O Toninho começou a me evitar!!!</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Ai, Ana Paula! Só quis ajudar, poxa... O cara também não se decidia! Uma hora dava bola, outra hora, não... Cara indeciso... <span className="italic text-gray-500">(vai pegar a pipoca)</span></p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Eu detesto isso, detesto! Deixa que eu resolvo as minhas coisas do meu jeito!</p>
                                        <p><strong className="text-purple-900">CAROL</strong> <span className="italic text-gray-500">(Carol dá de ombros, come pipoca)</span> - Só quis ajudar...</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Dispenso a sua ajuda! Sempre que eu dou ouvidos pros seus planos eu me ferro. Sempre! Eu não me abro mais com você, Carol! Nunca mais!</p>
                                        <p><strong className="text-purple-900">CAROL</strong> <span className="italic text-gray-500">(se desculpando)</span> - Puxa vida, Aninha, também não é pra tanto...</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Cadê? <span className="italic text-gray-500">(procura nas revistas)</span> Onde tá? "Quando uma amiga rompe um segredo, isso, muitas vezes, significa que poderá romper muitos outros. Cuidado!"</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Ah, é? Então vem cá. <span className="italic text-gray-500">(procura também)</span> Tá naquela que tem o Leo di Caprio... <span className="italic text-gray-500">(encontra, lê)</span> Escuta essa: "Amigas também erram. Se houve sinceridade por tanto tempo, por que não perdoar um errinho de nada? Relaxe!" <span className="italic text-gray-500">(mostra pra Ana)</span> Tá vendo? <span className="italic text-gray-500">(oferece pipoca e abraço)</span></p>
                                        <p className="italic text-gray-500">Ana Paula aceita o abraço. Fazem gestos de reconciliação com as mãos.</p>
                                        <p><strong className="text-pink-900">ANA PAULA</strong> - Eu não devia! Não vai demorar muito pra você aprontar outra das suas! É do seu caráter...</p>
                                        <p><strong className="text-purple-900">CAROL</strong> - Enquanto isso...</p>
                                        <p><strong className="text-gray-900">AS DUAS</strong> - Anestesia!</p>
                                        <p className="italic text-gray-500">As duas correm e se prostram em frente à TV por um tempo, comem pipoca.</p>
                                    </div>
                                    <div className="text-xs text-gray-400 border-t pt-2 mt-4 text-center">Referência: Adélia Nicolete. O que os meninos pensam delas?. Acesso em: 14/6/2015.</div>
                                </div>
                            </div>

                            <div className="flex items-center gap-3 mb-6 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-600">
                                <div className="bg-blue-600 text-white p-2 rounded-full">
                                    <BookOpen className="w-5 h-5" />
                                </div>
                                <div>
                                    <h3 className="font-bold text-blue-900">Hora de Responder</h3>
                                    <p className="text-sm text-blue-700">Responda todas as perguntas abaixo com base no texto. <strong>Todos os campos são obrigatórios.</strong></p>
                                </div>
                            </div>

                            <div className="space-y-8">
                                {/* ID */}
                                <section className="bg-gray-50 p-6 rounded-xl border border-gray-200">
                                    <h3 className="font-bold text-gray-700 mb-4 flex items-center gap-2">
                                        <span className="bg-gray-700 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">ID</span>
                                        Identificação do Aluno
                                    </h3>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div className={getFieldClass('studentName')}>
                                            <label className="block text-sm font-semibold text-gray-600 mb-1 px-1">Nome Completo *</label>
                                            <input type="text" value={answers.studentName} onChange={(e) => handleChange('studentName', e.target.value)} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Ex: Maria da Silva" />
                                        </div>
                                        <div className={getFieldClass('studentEmail')}>
                                            <label className="block text-sm font-semibold text-gray-600 mb-1 px-1">E-mail *</label>
                                            <input type="email" value={answers.studentEmail} onChange={(e) => handleChange('studentEmail', e.target.value)} className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="Ex: aluno@email.com" />
                                        </div>
                                    </div>
                                </section>

                                {/* Perguntas */}
                                <div className={`p-4 rounded-lg hover:bg-gray-50 transition-colors ${getFieldClass('q1')}`}>
                                    <h3 className="font-bold text-lg text-blue-900 mb-2">1. Tema da peça</h3>
                                    <p className="text-gray-700 mb-3 text-sm">Considerando o título da obra - "O que os meninos pensam delas?" -, levante hipóteses: Qual é, provavelmente, o tema da peça?</p>
                                    <AutoTextArea value={answers.q1} onChange={(e) => handleChange('q1', e.target.value)} placeholder="Sua resposta..." />
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">2. Rubrica inicial</h3>
                                    <div className="space-y-4">
                                        <div className={getFieldClass('q2a')}><label className="block text-gray-700 text-sm font-medium mb-1">a. Em que lugar a cena acontecerá?</label><AutoTextArea value={answers.q2a} onChange={(e) => handleChange('q2a', e.target.value)} /></div>
                                        
                                        <div className={getFieldClass('q2b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. Que personagens participarão da cena? Em que fase da vida elas provavelmente estão? Comprove com elementos do texto.</label><AutoTextArea value={answers.q2b} onChange={(e) => handleChange('q2b', e.target.value)} /></div>
                                        
                                        <div className={getFieldClass('q2c')}><label className="block text-gray-700 text-sm font-medium mb-1">c. Qual é o nível social das personagens? Comprove.</label><AutoTextArea value={answers.q2c} onChange={(e) => handleChange('q2c', e.target.value)} /></div>
                                        <div className={getFieldClass('q2d')}><label className="block text-gray-700 text-sm font-medium mb-1">d. Conclua: Qual é o papel da rubrica no início desse texto?</label><AutoTextArea value={answers.q2d} onChange={(e) => handleChange('q2d', e.target.value)} /></div>
                                    </div>
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">3. A encenação da história</h3>
                                    <div className="space-y-4">
                                        
                                        {/* Ajuste de Design: Botões Sim/Não Estilizados */}
                                        <div className={getFieldClass('q3a')}>
                                            <label className="block text-gray-700 text-sm font-medium mb-2">a. Existe um narrador que conta o que acontece e o que as personagens falam?</label>
                                            <div className="flex gap-4 mt-2">
                                                <label className={`flex-1 p-3 border rounded-lg text-center cursor-pointer transition-all ${answers.q3a === "Sim" ? "bg-blue-100 border-blue-500 text-blue-700 font-bold shadow-inner" : "hover:bg-gray-50 border-gray-300"}`}>
                                                    <input 
                                                        type="radio" 
                                                        name="q3a" 
                                                        value="Sim" 
                                                        checked={answers.q3a === "Sim"} 
                                                        onChange={(e) => handleChange('q3a', e.target.value)}
                                                        className="hidden"
                                                    />
                                                    SIM
                                                </label>
                                                <label className={`flex-1 p-3 border rounded-lg text-center cursor-pointer transition-all ${answers.q3a === "Não" ? "bg-blue-100 border-blue-500 text-blue-700 font-bold shadow-inner" : "hover:bg-gray-50 border-gray-300"}`}>
                                                    <input 
                                                        type="radio" 
                                                        name="q3a" 
                                                        value="Não" 
                                                        checked={answers.q3a === "Não"} 
                                                        onChange={(e) => handleChange('q3a', e.target.value)}
                                                        className="hidden"
                                                    />
                                                    NÃO
                                                </label>
                                            </div>
                                        </div>

                                        <div className={getFieldClass('q3b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. De que modo a história se desenrola?</label><AutoTextArea value={answers.q3b} onChange={(e) => handleChange('q3b', e.target.value)} /></div>
                                    </div>
                                </div>

                                <div className={`p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100 ${getFieldClass('q4')}`}>
                                    <h3 className="font-bold text-lg text-blue-900 mb-2">4. Diálogos</h3>
                                    <p className="text-gray-700 mb-3 text-sm">No texto, os diálogos cumprem um papel fundamental. De que modo o autor indica quem está falando?</p>
                                    <AutoTextArea value={answers.q4} onChange={(e) => handleChange('q4', e.target.value)} />
                                </div>

                                {/* Questão 5 REFORMULADA: ATITUDE e GESTO */}
                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-2">5. Rubricas ao longo do texto</h3>
                                    <p className="text-gray-700 mb-4 text-sm">
                                        Além da rubrica inicial, o texto apresenta outras rubricas entre parênteses. 
                                        <strong>Transcreva do texto</strong> um exemplo para cada situação abaixo:
                                    </p>
                                    
                                    <div className="space-y-4">
                                        <div className={getFieldClass('q5a')}>
                                            <label className="block text-gray-700 text-sm font-medium mb-1">a. Uma rubrica que indica uma <strong>AÇÃO</strong> ou fato (o que acontece):</label>
                                            <AutoTextArea value={answers.q5a} onChange={(e) => handleChange('q5a', e.target.value)} placeholder="Ex: (abre a janela) ou (senta no sofá)..." />
                                        </div>
                                        <div className={getFieldClass('q5b')}>
                                            <label className="block text-gray-700 text-sm font-medium mb-1">b. Uma rubrica que indica uma <strong>ATITUDE</strong> ou <strong>EMOÇÃO</strong> da personagem:</label>
                                            <AutoTextArea value={answers.q5b} onChange={(e) => handleChange('q5b', e.target.value)} placeholder="Ex: (nervosa) ou (com alegria)..." />
                                        </div>
                                        <div className={getFieldClass('q5c')}>
                                            <label className="block text-gray-700 text-sm font-medium mb-1">c. Uma rubrica que indica um <strong>MOVIMENTO</strong> ou <strong>GESTO</strong>:</label>
                                            <AutoTextArea value={answers.q5c} onChange={(e) => handleChange('q5c', e.target.value)} placeholder="Ex: (aponta para a porta)..." />
                                        </div>
                                        
                                        <div className={`mt-4 pt-4 border-t border-gray-200 ${getFieldClass('q5d')}`}>
                                            <label className="block text-gray-700 text-sm font-medium mb-1">d. <strong>CONCLUSÃO:</strong> Com base nos exemplos acima, explique qual é a função (o papel) das rubricas no texto teatral.</label>
                                            <AutoTextArea value={answers.q5d} onChange={(e) => handleChange('q5d', e.target.value)} placeholder="As rubricas servem para..." />
                                        </div>
                                    </div>
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">6. As personagens</h3>
                                    <div className="space-y-4">
                                        <div className={getFieldClass('q6a')}><label className="block text-gray-700 text-sm font-medium mb-1">a. Como elas se sentem? Por que se sentem assim?</label><AutoTextArea value={answers.q6a} onChange={(e) => handleChange('q6a', e.target.value)} /></div>
                                        <div className={getFieldClass('q6b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. Ana Paula revela estar magoada com Carol. Qual é o motivo?</label><AutoTextArea value={answers.q6b} onChange={(e) => handleChange('q6b', e.target.value)} /></div>
                                    </div>
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">7. As revistas</h3>
                                    <div className="space-y-4">
                                        <div className={getFieldClass('q7a')}><label className="block text-gray-700 text-sm font-medium mb-1">a. Que tipo de revista você imagina que as personagens leem?</label><AutoTextArea value={answers.q7a} onChange={(e) => handleChange('q7a', e.target.value)} /></div>
                                        <div className={getFieldClass('q7b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. O que personagens como Ana Paula e Carol buscam nelas?</label><AutoTextArea value={answers.q7b} onChange={(e) => handleChange('q7b', e.target.value)} /></div>
                                        <div className={getFieldClass('q7c')}><label className="block text-gray-700 text-sm font-medium mb-1">c. Elas parecem acreditar nos conselhos dados pela revista?</label><AutoTextArea value={answers.q7c} onChange={(e) => handleChange('q7c', e.target.value)} /></div>
                                    </div>
                                </div>

                                <div className={`p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100 ${getFieldClass('q8')}`}>
                                    <h3 className="font-bold text-lg text-blue-900 mb-2">8. "Anestesia!"</h3>
                                    {/* QUESTÃO 8 AJUSTADA */}
                                    <p className="text-gray-700 mb-3 text-sm">Levante hipóteses: O que elas querem dizer com a palavra <strong>"Anestesia"</strong>, no contexto?</p>
                                    <AutoTextArea value={answers.q8} onChange={(e) => handleChange('q8', e.target.value)} />
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">9. Linguagem das personagens</h3>
                                    <div className="space-y-4">
                                        <div className={getFieldClass('q9a')}><label className="block text-gray-700 text-sm font-medium mb-1">a. Como é a linguagem das personagens? Caracterize-a.</label><AutoTextArea value={answers.q9a} onChange={(e) => handleChange('q9a', e.target.value)} /></div>
                                        <div className={getFieldClass('q9b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. Essa linguagem coincide com a usada pelos adolescentes hoje?</label><AutoTextArea value={answers.q9b} onChange={(e) => handleChange('q9b', e.target.value)} /></div>
                                    </div>
                                </div>

                                <div className="p-4 rounded-lg hover:bg-gray-50 transition-colors border-t border-gray-100">
                                    <h3 className="font-bold text-lg text-blue-900 mb-4">10. Finalidade e público</h3>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div className={getFieldClass('q10a')}><label className="block text-gray-700 text-sm font-medium mb-1">a. Que finalidade a peça tem?</label><AutoTextArea value={answers.q10a} onChange={(e) => handleChange('q10a', e.target.value)} /></div>
                                        <div className={getFieldClass('q10b')}><label className="block text-gray-700 text-sm font-medium mb-1">b. Que tipo de público ela tem como alvo?</label><AutoTextArea value={answers.q10b} onChange={(e) => handleChange('q10b', e.target.value)} /></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Área de Envio */}
                        <div id="status-area" className="flex flex-col items-center gap-4 mt-8 px-4">
                            
                            {status.message && (
                                <div className={`w-full max-w-2xl p-4 rounded-lg flex items-center gap-3 text-sm font-medium animate-fade-in ${
                                    status.type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' : 
                                    status.type === 'error' ? 'bg-red-100 text-red-800 border border-red-200' : 'bg-blue-100 text-blue-800 border border-blue-200'
                                }`}>
                                    {status.type === 'success' ? <CheckCircle className="w-5 h-5 flex-shrink-0"/> : 
                                     status.type === 'error' ? <AlertCircle className="w-5 h-5 flex-shrink-0"/> : <Info className="w-5 h-5 flex-shrink-0"/>}
                                    <span>{status.message}</span>
                                </div>
                            )}

                            <button 
                                onClick={handleSubmit} 
                                disabled={isSubmitting} 
                                className={`
                                    w-full md:w-auto px-16 py-4 rounded-full font-bold text-xl shadow-xl flex items-center justify-center gap-3 transition-all transform hover:scale-105 active:scale-95
                                    ${isSubmitting 
                                        ? 'bg-gray-400 cursor-not-allowed text-gray-200' 
                                        : 'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white'
                                    }
                                `}
                            >
                                <Send className="w-6 h-6" />
                                {isSubmitting ? 'Enviando...' : 'ENTREGAR AVALIAÇÃO'}
                            </button>

                            <div className="flex items-center gap-2 text-gray-400 text-xs mt-2">
                                <SaveIcon className="w-3 h-3" />
                                <p>Rascunho salvo automaticamente</p>
                            </div>
                            <p className="text-gray-400 text-xs">Certifique-se de ter respondido todas as questões antes de enviar.</p>
                        </div>

                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TheaterActivity />);
    </script>
</body>
</html>
